Bom dia! Vamos montar um projeto que consiste em uma API que pode ser acessada por um link que abre uma janela com vÃ¡rios botÃµes, sendo que cada botÃ£o terÃ¡ uma finalidade especifica. O primeiro serÃ¡ um chatbot que lerÃ¡ um formulÃ¡rio de petiÃ§Ã£o em pdf (chatbot-fp1.py);  o segundo serÃ¡ um chatbot que lerÃ¡ um arquivo em pdf (RPP - RelatÃ³rios de RevisÃ£o Periodica); o terceiro serÃ¡ um web-scrapping que buscarÃ¡ dados especÃ­ficos (resultados de inspeÃ§Ãµes realizadas por estas instituiÃ§Ãµes) de websites do FDA, do EMA e do Health CanadÃ¡.

Bom dia, Carlos! Esse projeto tem tudo para ser extremamente Ãºtil e multifuncional â€” unir automaÃ§Ã£o de leitura de PDFs com inteligÃªncia artificial e coleta de dados web Ã© uma combinaÃ§Ã£o poderosa. Vamos estruturar os blocos principais da aplicaÃ§Ã£o para que tudo se encaixe com fluidez. Aqui vai uma proposta de arquitetura inicial:

ðŸ§© Estrutura Geral do Projeto
ðŸ”— Interface Web (Janela com BotÃµes)
- Desenvolvida com Flask ou FastAPI com frontend em HTML + JavaScript (ex: Bootstrap).
- Cada botÃ£o aciona uma rota especÃ­fica na API que chama um mÃ³dulo correspondente.
[FormulÃ¡rio de PetiÃ§Ã£o] â†’ chatbot-fp1.py  
[RPP - RelatÃ³rios de RevisÃ£o] â†’ chatbot-rpp.py  
[InspeÃ§Ãµes FDA/EMA/HC] â†’ webscraping-inspecoes.py



ðŸ¤– BotÃ£o 1: Chatbot para FormulÃ¡rio de PetiÃ§Ã£o (PDF)
FunÃ§Ã£o:
- Ler e interpretar formulÃ¡rios de petiÃ§Ã£o em PDF.
- Gerar respostas inteligentes ou extrair informaÃ§Ãµes estruturadas.
Componentes:
- PDF parser (ex: PyMuPDF ou pdfplumber)
- Modelo de linguagem (ex: OpenAI ou Hugging Face para entendimento do texto)
- Interface de chat tipo chatbot (streamlit/chat-ui com backend Python)

ðŸ“Š BotÃ£o 2: Chatbot para RelatÃ³rio de RevisÃ£o PeriÃ³dica (RPP)
FunÃ§Ã£o:
- Ler arquivos RPP em PDF.
- Realizar perguntas e respostas interativas sobre conteÃºdo do relatÃ³rio.
Componentes:
- Mesmo stack do BotÃ£o 1, com possÃ­veis adaptaÃ§Ãµes na lÃ³gica de extraÃ§Ã£o:
- ExtraÃ§Ã£o de datas, conclusÃµes, indicadores.

ðŸŒ BotÃ£o 3: Web Scraping FDA / EMA / Health Canada
FunÃ§Ã£o:
- Buscar dados sobre inspeÃ§Ãµes de medicamentos ou fabricantes nos sites oficiais.
- Compilar e apresentar dados de forma organizada.
Fontes:
- FDA Inspection Database
- EMA GCP & GMP Inspection Reports
- Health Canada Inspection Tracker
Ferramentas sugeridas:
- BeautifulSoup + requests para scraping simples.
- Selenium se for necessÃ¡rio interagir com pÃ¡ginas dinÃ¢micas.
- pandas para organizar e exportar os dados.

ðŸ—‚ OrganizaÃ§Ã£o dos Arquivos
/ProjetoAPI
â”‚
â”œâ”€â”€ api.py                # Arquivo principal da API
â”œâ”€â”€ chatbot-fp1.py        # Chatbot do formulÃ¡rio de petiÃ§Ã£o
â”œâ”€â”€ chatbot-rpp.py        # Chatbot dos relatÃ³rios RPP
â”œâ”€â”€ webscraping-inspecoes.py # Scraper FDA/EMA/HC
â”œâ”€â”€ static/               # CSS, JS, Ã­cones
â”œâ”€â”€ templates/            # HTML dos botÃµes e interface
â””â”€â”€ uploads/              # PDFs recebidos



Se quiser, podemos comeÃ§ar escrevendo um dos mÃ³dulos juntos. O que vocÃª prefere comeÃ§ar: o chatbot dos formulÃ¡rios ou o web scraping internacional?

----------------------------------------------------------------------
Claro, Carlos! Aqui estÃ£o os links diretos para os respectivos sistemas de inspeÃ§Ã£o de cada entidade reguladora:

ðŸ§ª FDA (Food and Drug Administration â€“ EUA)
- ðŸ”— FDA Inspection Classification Database
- ðŸ”— FDA Inspections Dashboard
Esses portais permitem buscar inspeÃ§Ãµes por empresa, tipo de produto, classificaÃ§Ã£o (NAI, VAI, OAI) e visualizar relatÃ³rios como o Form 483.

ðŸ‡ªðŸ‡º EMA (European Medicines Agency â€“ UniÃ£o Europeia)
- ðŸ”— EMA GCP Inspection Procedures
- ðŸ”— EMA Annual Report â€“ Inspections and Compliance
A EMA coordena inspeÃ§Ãµes de GCP e GMP em colaboraÃ§Ã£o com autoridades nacionais. Os relatÃ³rios sÃ£o publicados em forma de mÃ©tricas e documentos tÃ©cnicos.

ðŸ Health Canada (CanadÃ¡)
- ðŸ”— Health Canada Inspection Tracker
- ðŸ”— Drug & Health Product Inspections Database
O tracker canadense mostra aÃ§Ãµes regulatÃ³rias em andamento, como quarentenas voluntÃ¡rias, restriÃ§Ãµes de importaÃ§Ã£o e recalls.

Se quiser, posso te ajudar a montar o scraper para cada um desses sites. Qual deles vocÃª quer comeÃ§ar a explorar?

FDA Inspection Resources
| Portal | DescriÃ§Ã£o | Link | 
| Inspection Classification Database | Mostra classificaÃ§Ãµes finais de inspeÃ§Ãµes (NAI, VAI, OAI) por Ã¡rea de projeto. Ideal para entender o status de conformidade de fabricantes. | Acesse aqui | 
| FDA Inspections Dashboard | Interface visual com filtros por tipo de produto, paÃ­s, ano fiscal, e acesso a FormulÃ¡rios 483 publicados. | Explore o dashboard | 



Esses sites sÃ£o atualizados semanalmente e oferecem dados pÃºblicos sobre inspeÃ§Ãµes realizadas em estabelecimentos regulados. VocÃª pode buscar por nome da empresa, paÃ­s, tipo de produto, e atÃ© baixar datasets.
Se quiser, posso te ajudar a comeÃ§ar o cÃ³digo de scraping para um deles. Quer que eu monte um exemplo com requests e BeautifulSoup para o Dashboard?


 Exemplo de Web Scraping com Selenium (FDA Dashboard)
âœ… PrÃ©-requisitos:
Antes de tudo, certifique-se de instalar os pacotes:
pip install selenium pandas


E tenha o ChromeDriver compatÃ­vel com sua versÃ£o do Chrome.

ðŸ“œ CÃ³digo Python Inicial
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.service import Service
import pandas as pd
import time

# Caminho do ChromeDriver
service = Service("CAMINHO/para/chromedriver.exe")

# ConfiguraÃ§Ã£o do navegador
options = webdriver.ChromeOptions()
options.add_argument("--headless")  # Executa sem abrir janela
driver = webdriver.Chrome(service=service, options=options)

# Acessa o Dashboard
url = "https://datadashboard.fda.gov/oii/cd/inspections.htm"
driver.get(url)
time.sleep(5)  # Aguarda carregamento da pÃ¡gina

# Exemplo: Captura tÃ­tulos das seÃ§Ãµes de filtros
titles = driver.find_elements(By.CLASS_NAME, "card-title")
for t in titles:
    print("TÃ­tulo:", t.text)

# Exemplo: Captura uma tabela (se presente)
try:
    table = driver.find_element(By.ID, "example-table")  # ID fictÃ­cio
    rows = table.find_elements(By.TAG_NAME, "tr")
    for row in rows:
        cols = row.find_elements(By.TAG_NAME, "td")
        data = [col.text for col in cols]
        print(data)
except:
    print("Tabela nÃ£o localizada ou conteÃºdo dinÃ¢mico ainda nÃ£o carregado.")

driver.quit()

î·›î·œ

ðŸ§  Dica:
Como o conteÃºdo Ã© carregado dinamicamente, vocÃª pode usar tambÃ©m o driver.execute_script() para capturar informaÃ§Ãµes JavaScript ou interagir com botÃµes/filtros.
Se quiser, posso adaptar esse script para extrair inspeÃ§Ãµes por paÃ­s ou mostrar a classificaÃ§Ã£o (OAI, VAI, NAI) diretamente. Quer que avancemos nisso?

 Etapa 1: SimulaÃ§Ã£o de InteraÃ§Ã£o + Coleta de Dados
Aqui estÃ¡ um exemplo mais elaborado para:
- Abrir o FDA Dashboard
- Selecionar filtros (como paÃ­s)
- Coletar dados da tabela de inspeÃ§Ãµes
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support impo

-----------------------------------------------------------------------
BUSCA NO SITE DO FDA POR NOME OU FEI 

Perfeito! Vamos montar um mÃ³dulo que aceita o nome da empresa ou o nÃºmero FEI como entrada e retorna os dados disponÃ­veis no portal FDA Firm/Supplier Evaluation Resources.
Como o site Ã© altamente dinÃ¢mico, usaremos novamente o Selenium para simular a busca.

ðŸ§ª Script de Busca por Empresa ou FEI no FDA Dashboard
ðŸ”§ PrÃ©-requisitos
pip install selenium pandas



ðŸ“œ CÃ³digo Python Base
 

from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import pandas as pd
import time

# â† Atualize com seu caminho local do chromedriver
service = Service("CAMINHO/para/chromedriver.exe")
options = webdriver.ChromeOptions()
options.add_argument("--headless")

# Inicializa navegador
driver = webdriver.Chrome(service=service, options=options)
wait = WebDriverWait(driver, 15)

# URL da ferramenta FDA
url = "https://datadashboard.fda.gov/oii/fd/fser.htm"
driver.get(url)
time.sleep(5)

# --- Entrar com nome da empresa ou FEI ---
empresa_ou_fei = "Pfizer"  # â† substitua pelo nome ou nÃºmero FEI desejado

# Localiza campo de busca e insere valor
try:
    campo_busca = wait.until(EC.presence_of_element_located((By.ID, "searchInput")))  # â† confirmar o ID real
    campo_busca.clear()
    campo_busca.send_keys(empresa_ou_fei)
    time.sleep(2)

    botao_buscar = driver.find_element(By.ID, "searchButton")  # â† confirmar o ID real
    botao_buscar.click()
    time.sleep(8)

    # Captura resultados da tabela
    resultados = driver.find_elements(By.CLASS_NAME, "result-row")  # â† ajustar para estrutura real
    for item in resultados:
        print(item.text)

except Exception as e:
    print("Erro ao buscar empresa:", e)

driver.quit()


 AdaptaÃ§Ãµes Futuras
Se quiser transformar isso em uma API para seu projeto, podemos:
- Receber os dados via POST de formulÃ¡rio HTML.
- Retornar os dados como JSON.
- Incorporar cache para buscas frequentes.
- Tratar erros e buscas invÃ¡lidas.
Quer que a gente transforme esse script em uma funÃ§Ã£o reutilizÃ¡vel dentro da sua API Flask ou FastAPI? Posso te ajudar com isso tambÃ©m!

========================================================================
BUSCA NO SITE DO EMA

Perfeito, Carlos! Vamos focar exclusivamente no portal do EMA para buscar dados de autorizaÃ§Ãµes MIA (Manufacturing and Importation Authorisation) usando nome da empresa, paÃ­s e/ou nÃºmero MIA.

ðŸŒ Portal Oficial do EMA para MIA
ðŸ”— EudraGMDP â€“ Search MIA
Esse Ã© o site onde vocÃª pode realizar buscas detalhadas por:
- Nome da empresa (com uso de coringas como *Pharma*)
- PaÃ­s de emissÃ£o
- NÃºmero MIA
- Cidade, cÃ³digo postal, DUNS Number, OMS Organisation ID
- Tipo de operaÃ§Ã£o autorizada (ex: fabricaÃ§Ã£o, importaÃ§Ã£o)
- Legal Basis of Authorisation (ex: Art. 40 da Diretiva 2001/83/EC)

ðŸ› ï¸ Como funciona a busca
- VocÃª pode usar asteriscos como coringas:
- *Inc. â†’ empresas que terminam com â€œInc.â€
- Pharmaco* â†’ empresas que comeÃ§am com â€œPharmacoâ€
- Se nÃ£o preencher nenhum campo, o sistema retorna todas as MIAs do paÃ­s selecionado.
- Ã‰ possÃ­vel incluir MIAs retiradas ou suspensas marcando as caixas correspondentes.
- Os resultados podem ser exportados em Excel diretamente da interface.

ðŸ’¡ PrÃ³ximo passo
Posso montar um script com Selenium que:
- Aceita como entrada o nome da empresa, paÃ­s ou nÃºmero MIA
- Realiza a busca no site
- Extrai os resultados da tabela
- Retorna como DataFrame ou JSON para sua API
Quer que eu comece esse mÃ³dulo agora? Posso te entregar um exemplo funcional rapidinho! ðŸ˜„

Script de Busca de MIA no Portal da EMA
ðŸš€ PrÃ©-requisitos
Instale os pacotes:
pip install selenium pandas


Garanta tambÃ©m que o ChromeDriver esteja instalado e compatÃ­vel com sua versÃ£o do Chrome.

ðŸ§ª CÃ³digo Python Inicial
from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
import pandas as pd
import time

# ParÃ¢metros de busca
empresa = "Pfizer"
pais = "Germany"
numero_mia = ""  # Se quiser buscar pelo nÃºmero, insira aqui

# Caminho do ChromeDriver
service = Service("CAMINHO/para/chromedriver.exe")
options = webdriver.ChromeOptions()
options.add_argument("--headless")

# Inicializa navegador
driver = webdriver.Chrome(service=service, options=options)

# Acessa o site
url = "https://eudragmdp.ema.europa.eu/inspections/mia/searchMIA.do"
driver.get(url)
time.sleep(3)

# Preenche o campo de nome da empresa
driver.find_element(By.NAME, "companyName").send_keys(empresa)

# Seleciona o paÃ­s
select_country = Select(driver.find_element(By.NAME, "country"))
select_country.select_by_visible_text(pais)

# NÃºmero MIA (opcional)
if numero_mia:
    driver.find_element(By.NAME, "miaNumber").send_keys(numero_mia)

# Clica no botÃ£o de busca
driver.find_element(By.NAME, "submit").click()
time.sleep(5)

# Extrai dados da tabela
rows = driver.find_elements(By.CSS_SELECTOR, "table.reportTable > tbody > tr")

dados = []
for row in rows[1:]:  # Ignora cabeÃ§alho
    cols = row.find_elements(By.TAG_NAME, "td")
    dados.append([col.text.strip() for col in cols])

# Cria DataFrame
colunas = ["Company Name", "MIA Number", "Address", "City", "Postal Code", "Country", "Type of Authorisation", "Operations"]
df = pd.DataFrame(dados, columns=colunas)
print(df.head())

driver.quit()

î·›î·œî·™î·š

ðŸ§  Dicas Futuras
- Podemos transformar esse script em um endpoint de API que retorna JSON com os dados da MIA.
- Ã‰ possÃ­vel expandir para capturar tambÃ©m documentos PDF de inspeÃ§Ã£o vinculados, se disponÃ­veis.
- Podemos incluir filtros adicionais (como tipo de operaÃ§Ã£o autorizada ou status do MIA).
Quer que a gente transforme isso em um mÃ³dulo oficial da sua API com entrada via formulÃ¡rio web? Posso seguir com isso e integrar os dados na interface que mencionou! ðŸ§±ðŸ“¡

from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
import pandas as pd
import time

# ParÃ¢metros de busca
empresa = "Pfizer"
pais = "Germany"
numero_mia = ""  # Se quiser buscar pelo nÃºmero, insira aqui

# Caminho do ChromeDriver
service = Service("CAMINHO/para/chromedriver.exe")
options = webdriver.ChromeOptions()
options.add_argument("--headless")

# Inicializa navegador
driver = webdriver.Chrome(service=service, options=options)

# Acessa o site
url = "https://eudragmdp.ema.europa.eu/inspections/mia/searchMIA.do"
driver.get(url)
time.sleep(3)

# Preenche o campo de nome da empresa
driver.find_element(By.NAME, "companyName").send_keys(empresa)

# Seleciona o paÃ­s
select_country = Select(driver.find_element(By.NAME, "country"))
select_country.select_by_visible_text(pais)

# NÃºmero MIA (opcional)
if numero_mia:
    driver.find_element(By.NAME, "miaNumber").send_keys(numero_mia)

# Clica no botÃ£o de busca
driver.find_element(By.NAME, "submit").click()
time.sleep(5)

# Extrai dados da tabela
rows = driver.find_elements(By.CSS_SELECTOR, "table.reportTable > tbody > tr")

dados = []
for row in rows[1:]:  # Ignora cabeÃ§alho
    cols = row.find_elements(By.TAG_NAME, "td")
    dados.append([col.text.strip() for col in cols])

# Cria DataFrame
colunas = ["Company Name", "MIA Number", "Address", "City", "Postal Code", "Country", "Type of Authorisation", "Operations"]
df = pd.DataFrame(dados, columns=colunas)
print(df.head())

driver.quit()

Dicas Futuras
- Podemos transformar esse script em um endpoint de API que retorna JSON com os dados da MIA.
- Ã‰ possÃ­vel expandir para capturar tambÃ©m documentos PDF de inspeÃ§Ã£o vinculados, se disponÃ­veis.
- Podemos incluir filtros adicionais (como tipo de operaÃ§Ã£o autorizada ou status do MIA).
Quer que a gente transforme isso em um mÃ³dulo oficial da sua API com entrada via formulÃ¡rio web? Posso seguir com isso e integrar os dados na interface que mencionou! ðŸ§±ðŸ“¡

/////////////////////////////////////////////////////////////////////////////////////

ðŸ—‚ OrganizaÃ§Ã£o dos Arquivos
/ProjetoAPI
â”‚
â”œâ”€â”€ api.py                # Arquivo principal da API
â”œâ”€â”€ chatbot-fp1.py        # Chatbot do formulÃ¡rio de petiÃ§Ã£o
â”œâ”€â”€ chatbot-rpp.py        # Chatbot dos relatÃ³rios RPP
â”œâ”€â”€ webscraping-inspecoes.py # Scraper FDA/EMA/HC
â”œâ”€â”€ static/               # CSS, JS, Ã­cones
â”œâ”€â”€ templates/            # HTML dos botÃµes e interface
â””â”€â”€ uploads/              # PDFs recebidos



COMMITS - 30/07/2025

- AlteraÃ§Ã£o do nome da pasta de chatbot-pdf para AnalisePeticoes, o nome do projeto.
- EstruturaÃ§Ã£o das pastas que comporaÃ§Ã£o o projeto 
- Subpastas criadas: static/, templates/ e uploads/
- arquivos criados: api.py, chatbot-fp1.py, chatbot-rpp.py e ebscraping-hii.py (hii - histÃ³rico inspeÃ§oes internacionais)